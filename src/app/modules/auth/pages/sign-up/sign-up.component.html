<div class="min-h-screen bg-gradient-to-br from-background to-card p-4">
  <div class="max-w-md mx-auto">
    <!-- Progress Indicator -->
    <div class="mb-8">
      <div class="flex items-center justify-between mb-2">
        <div *ngFor="let step of steps; let i = index" class="flex items-center">
          <div class="w-8 h-8 rounded-full flex items-center justify-center text-xs font-medium"
               [ngClass]="currentStep >= i ? 'bg-primary text-primary-foreground' : 'bg-muted text-muted-foreground'">
            {{i + 1}}
          </div>
          <div *ngIf="i < steps.length - 1" class="w-12 h-1 mx-1"
               [ngClass]="currentStep > i ? 'bg-primary' : 'bg-muted'"></div>
        </div>
      </div>
      <div class="text-center text-sm text-muted-foreground">
        Step {{currentStep + 1}} of {{steps.length}}: {{steps[currentStep].title}}
      </div>
    </div>

    <form [formGroup]="signUpForm" (ngSubmit)="onSubmit()" class="bg-card rounded-2xl shadow-lg p-6">
      <!-- Step 1: Personal Information -->
      <div *ngIf="currentStep === 0" class="space-y-5 animate-fade-in">
        <div class="text-center mb-6">
          <h2 class="text-2xl font-bold text-primary">Personal Information</h2>
          <p class="text-muted-foreground text-sm mt-1">Let's start with your basic details</p>
        </div>

        <div>
          <label class="block text-sm font-medium text-foreground mb-1.5">Full Name</label>
          <input type="text" formControlName="fullName" 
                 class="w-full px-4 py-3 rounded-xl border border-border bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all"
                 placeholder="John Doe" />
        </div>

        <div>
          <label class="block text-sm font-medium text-foreground mb-1.5">Date of Birth</label>
          <input type="date" formControlName="dateOfBirth" 
                 class="w-full px-4 py-3 rounded-xl border border-border bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all" />
        </div>

        <div>
          <label class="block text-sm font-medium text-foreground mb-1.5">Gender</label>
          <div class="grid grid-cols-3 gap-2">
            <label *ngFor="let gender of genders" class="flex items-center justify-center p-3 rounded-xl border border-border cursor-pointer transition-all"
                   [ngClass]="signUpForm.get('gender')?.value === gender.value ? 'border-primary bg-primary/10' : 'hover:bg-muted/50'">
              <input type="radio" formControlName="gender" [value]="gender.value" class="sr-only" />
              <span class="text-sm font-medium">{{gender.label}}</span>
            </label>
          </div>
        </div>

        <div>
          <label class="block text-sm font-medium text-foreground mb-1.5">Nationality</label>
          <input type="text" formControlName="nationality" 
                 class="w-full px-4 py-3 rounded-xl border border-border bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all"
                 placeholder="e.g. American" />
        </div>
      </div>

      <!-- Step 2: Identification Details -->
      <div *ngIf="currentStep === 1" class="space-y-5 animate-fade-in">
        <div class="text-center mb-6">
          <h2 class="text-2xl font-bold text-primary">Identification</h2>
          <p class="text-muted-foreground text-sm mt-1">Provide your identification details</p>
        </div>

        <div>
          <label class="block text-sm font-medium text-foreground mb-1.5">ID Type</label>
          <div class="grid grid-cols-2 gap-3">
            <label *ngFor="let idType of idTypes" class="flex items-center justify-center p-3 rounded-xl border border-border cursor-pointer transition-all"
                   [ngClass]="signUpForm.get('identificationType')?.value === idType.value ? 'border-primary bg-primary/10' : 'hover:bg-muted/50'">
              <input type="radio" formControlName="identificationType" [value]="idType.value" class="sr-only" />
              <span class="text-sm font-medium">{{idType.label}}</span>
            </label>
          </div>
        </div>

        <div>
          <label class="block text-sm font-medium text-foreground mb-1.5">ID Number</label>
          <input type="text" formControlName="passportNumber" 
                 class="w-full px-4 py-3 rounded-xl border border-border bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all"
                 placeholder="Enter your ID number" />
        </div>

        <div>
          <label class="block text-sm font-medium text-foreground mb-1.5">Expiry Date</label>
          <input type="date" formControlName="passportExpiryDate" 
                 class="w-full px-4 py-3 rounded-xl border border-border bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all" />
        </div>
      </div>

      <!-- Step 3: Account Setup -->
      <div *ngIf="currentStep === 2" class="space-y-5 animate-fade-in">
        <div class="text-center mb-6">
          <h2 class="text-2xl font-bold text-primary">Account Setup</h2>
          <p class="text-muted-foreground text-sm mt-1">Create your login credentials</p>
        </div>

        <div>
          <label class="block text-sm font-medium text-foreground mb-1.5">Email Address</label>
          <input type="email" formControlName="email" 
                 class="w-full px-4 py-3 rounded-xl border border-border bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all"
                 placeholder="you@example.com" />
        </div>

        <div>
          <label class="block text-sm font-medium text-foreground mb-1.5">Password</label>
          <div class="relative">
            <input [type]="showPassword ? 'text' : 'password'" formControlName="password" 
                   class="w-full px-4 py-3 rounded-xl border border-border bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all"
                   placeholder="Create a strong password" />
            <button type="button" (click)="togglePassword()" 
                    class="absolute inset-y-0 right-0 flex items-center pr-4 text-muted-foreground">
              <svg-icon [src]="showPassword ? 'assets/icons/heroicons/outline/eye.svg' : 'assets/icons/heroicons/outline/eye-off.svg'" [svgClass]="'h-5 w-5'"></svg-icon>
            </button>
          </div>
        </div>

        <div>
          <label class="block text-sm font-medium text-foreground mb-1.5">Confirm Password</label>
          <input type="password" formControlName="confirmPassword" 
                 class="w-full px-4 py-3 rounded-xl border border-border bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all"
                 placeholder="Re-enter your password" />
        </div>
      </div>

      <!-- Step 4: Document Upload -->
      <div *ngIf="currentStep === 3" class="space-y-5 animate-fade-in">
        <div class="text-center mb-6">
          <h2 class="text-2xl font-bold text-primary">Upload Document</h2>
          <p class="text-muted-foreground text-sm mt-1">Upload your ID document</p>
        </div>

        <div class="border-2 border-dashed border-border rounded-xl p-8 text-center">
          <div class="flex justify-center mb-4">
            <svg-icon src="assets/icons/heroicons/outline/document-text.svg" [svgClass]="'h-12 w-12 text-muted-foreground'"></svg-icon>
          </div>
          <p class="text-sm text-muted-foreground mb-2">Upload your passport or ID document</p>
          <p class="text-xs text-muted-foreground mb-4">PDF, JPG or PNG (Max. 5MB)</p>
          <label class="inline-block px-4 py-2 bg-primary text-primary-foreground rounded-lg text-sm font-medium cursor-pointer hover:bg-primary/90 transition-colors">
            Choose File
            <input type="file" id="idDocument" (change)="onFileChange($event)" class="hidden" />
          </label>
          <div *ngIf="uploadedFileName" class="mt-4 text-sm text-foreground">
            Selected: {{uploadedFileName}}
          </div>
        </div>
      </div>

      <!-- Step 5: Terms & Submission -->
      <div *ngIf="currentStep === 4" class="space-y-5 animate-fade-in">
        <div class="text-center mb-6">
          <h2 class="text-2xl font-bold text-primary">Almost Done!</h2>
          <p class="text-muted-foreground text-sm mt-1">Review and submit your registration</p>
        </div>

        <div class="bg-muted/50 rounded-xl p-4 space-y-3">
          <div class="flex justify-between">
            <span class="text-sm text-muted-foreground">Full Name:</span>
            <span class="text-sm font-medium">{{signUpForm.get('fullName')?.value || 'Not provided'}}</span>
          </div>
          <div class="flex justify-between">
            <span class="text-sm text-muted-foreground">Email:</span>
            <span class="text-sm font-medium">{{signUpForm.get('email')?.value || 'Not provided'}}</span>
          </div>
          <div class="flex justify-between">
            <span class="text-sm text-muted-foreground">ID Type:</span>
            <span class="text-sm font-medium">{{signUpForm.get('identificationType')?.value || 'Not provided'}}</span>
          </div>
        </div>

        <div class="flex items-start gap-3">
          <input type="checkbox" formControlName="acceptTerms" id="acceptTerms" 
                 class="mt-1 h-5 w-5 rounded border-border text-primary focus:ring-primary" />
          <label for="acceptTerms" class="text-sm text-muted-foreground">
            I agree to the <a href="#" class="text-primary hover:underline">Terms of Service</a> and 
            <a href="#" class="text-primary hover:underline">Privacy Policy</a>
          </label>
        </div>
      </div>

      <!-- Navigation Buttons -->
      <div class="flex justify-between mt-8">
        <button type="button" *ngIf="currentStep > 0" (click)="previousStep()" 
                class="px-5 py-2.5 border border-border rounded-xl text-foreground hover:bg-muted/50 transition-colors">
          Previous
        </button>
        
        <div *ngIf="currentStep === 0" class="w-full"></div>
        
        <button type="button" *ngIf="currentStep < steps.length - 1" (click)="nextStep()" 
                [disabled]="!isCurrentStepValid()" 
                class="ml-auto px-5 py-2.5 bg-primary text-primary-foreground rounded-xl hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed transition-colors">
          Next
        </button>
        
        <button type="submit" *ngIf="currentStep === steps.length - 1" 
                [disabled]="signUpForm.invalid" 
                class="ml-auto px-5 py-2.5 bg-primary text-primary-foreground rounded-xl hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed transition-colors">
          Create Account
        </button>
      </div>
    </form>

    <!-- Sign In Link -->
    <div class="text-center mt-6 text-sm text-muted-foreground">
      Already have an account? 
      <a (click)="onNavigateToSignIn()" class="text-primary font-medium hover:underline">Sign in</a>
    </div>
  </div>
</div>