<!-- src/app/components/facilitator-create/facilitator-create.component.html -->
  <div class="user-creation-container items-center">
    <div class="creation-header">
        <h1>Fufi Med Facilitator Creation</h1>
        <p>Create a new Facilitator account</p>
    </div>
    
    <!-- Progress Steps -->
    <!-- <div class="mb-10">
      <div class="flex items-center justify-between">
        <div *ngFor="let step of [1, 2]; let i = index" class="flex items-center">
          <div
            class="flex h-12 w-12 items-center justify-center rounded-full border-2 text-lg font-semibold transition-all duration-300"
            [ngClass]="{
              'border-blue-500 bg-blue-500 text-white shadow-md': currentStep === step,
              'border-green-500 bg-green-500 text-white shadow-md': currentStep > step,
              'border-gray-300 text-gray-500 bg-white': currentStep < step
            }">
            {{ step }}
          </div>
          <div
            class="ml-4 text-lg font-medium"
            [ngClass]="{
              'text-blue-600': currentStep === step,
              'text-green-600': currentStep > step,
              'text-gray-500': currentStep < step
            }">
            {{ getStepTitle(step) }}
          </div>
          <div *ngIf="i < 1" class="mx-6 h-1 flex-1 rounded-full bg-gray-300"></div>
        </div>
      </div>
    </div> -->
    
    <!-- Form Container -->
    <div class="creation-body">
      <!-- Step 1: User Account -->
      <div *ngIf="currentStep === 1" class="p-8">
        <h2 class="mb-8 text-2xl font-bold text-gray-800">Create User Account</h2>
        <form [formGroup]="userForm">
          <div class="space-y-6">
            <div class="form-group">
              <label for="username" class="mb-2 block text-sm font-medium text-gray-700">Username</label>
              <div class="form-control-with-icon">
                <i class="fas fa-user"></i>
                <input
                  type="text"
                  id="username"
                  formControlName="username"
                  class="form-control"
                  placeholder="Username"
                  [ngClass]="{
                    'border-red-500 focus:border-red-500 focus:ring-red-200': userForm.get('username')?.touched && userForm.get('username')?.invalid
                  }" />
              </div>
              <div
                *ngIf="userForm.get('username')?.touched && userForm.get('username')?.invalid"
                class="mt-1 text-sm text-red-600">
                <div *ngIf="userForm.get('username')?.errors?.['required']">Username is required</div>
                <div *ngIf="userForm.get('username')?.errors?.['minlength']">
                  Username must be at least 3 characters
                </div>
              </div>
            </div>
            <div class="form-group">
              <label for="email" class="mb-2 block text-sm font-medium text-gray-700">Email</label>
              <div class="form-control-with-icon">
                <i class="fas fa-envelope"></i>
                <input
                  type="email"
                  id="email"
                  formControlName="email"
                  class="form-control"
                  placeholder="Email"
                  [ngClass]="{ 'border-red-500 focus:border-red-500 focus:ring-red-200': userForm.get('email')?.touched && userForm.get('email')?.invalid }" />
              </div>
              <div
                *ngIf="userForm.get('email')?.touched && userForm.get('email')?.invalid"
                class="mt-1 text-sm text-red-600">
                <div *ngIf="userForm.get('email')?.errors?.['required']">Email is required</div>
                <div *ngIf="userForm.get('email')?.errors?.['email']">Please enter a valid email</div>
              </div>
            </div>
            <div class="form-group">
              <label for="password" class="mb-2 block text-sm font-medium text-gray-700">Password</label>
              <div class="form-control-with-icon">
                <i class="fas fa-lock"></i>
                <input
                  type="password"
                  id="password"
                  formControlName="password"
                  class="form-control"
                  placeholder="Password"
                  [ngClass]="{
                    'border-red-500 focus:border-red-500 focus:ring-red-200': userForm.get('password')?.touched && userForm.get('password')?.invalid
                  }" />
              </div>
              <div
                *ngIf="userForm.get('password')?.touched && userForm.get('password')?.invalid"
                class="mt-1 text-sm text-red-600">
                <div *ngIf="userForm.get('password')?.errors?.['required']">Password is required</div>
                <div *ngIf="userForm.get('password')?.errors?.['minlength']">
                  Password must be at least 6 characters
                </div>
              </div>
            </div>
            <div class="form-group">
              <label for="confirmPassword" class="mb-2 block text-sm font-medium text-gray-700">Confirm Password</label>
              <div class="form-control-with-icon">
                <i class="fas fa-lock"></i>
                <input
                  type="password"
                  id="confirmPassword"
                  formControlName="confirmPassword"
                  class="form-control"
                  placeholder="Confirm Password"
                  [ngClass]="{
                    'border-red-500 focus:border-red-500 focus:ring-red-200': userForm.get('confirmPassword')?.touched && userForm.get('confirmPassword')?.invalid
                  }" />
              </div>
              <div
                *ngIf="userForm.get('confirmPassword')?.touched && userForm.get('confirmPassword')?.invalid"
                class="mt-1 text-sm text-red-600">
                <div *ngIf="userForm.get('confirmPassword')?.errors?.['required']">Please confirm your password</div>
                <div *ngIf="userForm.errors?.['passwordMismatch']">Passwords do not match</div>
              </div>
            </div>
          </div>
        </form>
      </div>
      
      <!-- Step 2: Facilitator Details -->
      <div *ngIf="currentStep === 2" class="p-8">
        <h2 class="mb-8 text-2xl font-bold text-gray-800">Facilitator Details</h2>
        <form [formGroup]="facilitatorForm">
          <div class="grid grid-cols-1 gap-6 md:grid-cols-2">
            <div class="form-group">
              <label for="firstName" class="mb-2 block text-sm font-medium text-gray-700">First Name</label>
              <div class="form-control-with-icon">
                <i class="fas fa-user"></i>
                <input
                  type="text"
                  id="firstName"
                  formControlName="firstName"
                  class="form-control"
                  placeholder="First Name"
                  [ngClass]="{
                    'border-red-500 focus:border-red-500 focus:ring-red-200':
                      facilitatorForm.get('firstName')?.touched && facilitatorForm.get('firstName')?.invalid
                  }" />
              </div>
              <div
                *ngIf="facilitatorForm.get('firstName')?.touched && facilitatorForm.get('firstName')?.invalid"
                class="mt-1 text-sm text-red-600">
                First name is required
              </div>
            </div>
            <div class="form-group">
              <label for="lastName" class="mb-2 block text-sm font-medium text-gray-700">Last Name</label>
              <div class="form-control-with-icon">
                <i class="fas fa-user"></i>
                <input
                  type="text"
                  id="lastName"
                  formControlName="lastName"
                  class="form-control"
                  placeholder="Last Name"
                  [ngClass]="{
                    'border-red-500 focus:border-red-500 focus:ring-red-200': facilitatorForm.get('lastName')?.touched && facilitatorForm.get('lastName')?.invalid
                  }" />
              </div>
              <div
                *ngIf="facilitatorForm.get('lastName')?.touched && facilitatorForm.get('lastName')?.invalid"
                class="mt-1 text-sm text-red-600">
                Last name is required
              </div>
            </div>
            <div class="form-group">
              <label for="phone" class="mb-2 block text-sm font-medium text-gray-700">Phone</label>
              <div class="form-control-with-icon">
                <i class="fas fa-phone"></i>
                <input
                  type="tel"
                  id="phone"
                  formControlName="phone"
                  class="form-control"
                  placeholder="Phone"
                  [ngClass]="{
                    'border-red-500 focus:border-red-500 focus:ring-red-200': facilitatorForm.get('phone')?.touched && facilitatorForm.get('phone')?.invalid
                  }" />
              </div>
              <div
                *ngIf="facilitatorForm.get('phone')?.touched && facilitatorForm.get('phone')?.invalid"
                class="mt-1 text-sm text-red-600">
                Phone number is required
              </div>
            </div>
            <div class="form-group">
              <label for="dateOfBirth" class="mb-2 block text-sm font-medium text-gray-700">Date of Birth</label>
              <div class="form-control-with-icon">
                <i class="fas fa-calendar"></i>
                <input
                  type="date"
                  id="dateOfBirth"
                  formControlName="dateOfBirth"
                  class="form-control"
                  placeholder="Date of Birth" />
              </div>
            </div>
            <div class="form-group">
              <label for="gender" class="mb-2 block text-sm font-medium text-gray-700">Gender</label>
              <div class="form-control-with-icon">
                <i class="fas fa-venus-mars"></i>
                <select
                  id="gender"
                  formControlName="gender"
                  class="form-control">
                  <option value="">Select Gender</option>
                  <option value="Male">Male</option>
                  <option value="Female">Female</option>
                  <option value="Other">Other</option>
                </select>
              </div>
            </div>
            <div class="form-group">
              <label for="idType" class="mb-2 block text-sm font-medium text-gray-700">ID Type</label>
              <div class="form-control-with-icon">
                <i class="fas fa-id-card"></i>
                <select
                  id="idType"
                  formControlName="idType"
                  class="form-control">
                  <option value="">Select ID Type</option>
                  <option value="Passport">Passport</option>
                  <option value="Driver License">Driver License</option>
                  <option value="National ID">National ID</option>
                </select>
              </div>
            </div>
            <div class="form-group">
              <label for="idNumber" class="mb-2 block text-sm font-medium text-gray-700">ID Number</label>
              <div class="form-control-with-icon">
                <i class="fas fa-hashtag"></i>
                <input
                  type="text"
                  id="idNumber"
                  formControlName="idNumber"
                  class="form-control"
                  placeholder="ID Number" />
              </div>
            </div>
            <div class="form-group">
              <label for="country" class="mb-2 block text-sm font-medium text-gray-700">Country</label>
              <div class="form-control-with-icon">
                <i class="fas fa-globe"></i>
                <input
                  type="text"
                  id="country"
                  formControlName="country"
                  class="form-control"
                  placeholder="Country" />
              </div>
            </div>
            <div class="form-group md:col-span-2">
              <label for="address" class="mb-2 block text-sm font-medium text-gray-700">Address</label>
              <div class="form-control-with-icon">
                <i class="fas fa-map-marker-alt"></i>
                <textarea
                  id="address"
                  formControlName="address"
                  rows="3"
                  class="form-control"
                  placeholder="Address"></textarea>
              </div>
            </div>
            
            <!-- Languages Multi-select -->
            <div class="form-group md:col-span-2">
              <label class="mb-2 block text-sm font-medium text-gray-700">Languages</label>
              <div class="form-control-with-icon">
                <i class="fas fa-language"></i>
                <select
                  id="languageIds"
                  formControlName="languageIds"
                  multiple
                  class="form-control">
                  <option *ngFor="let language of languages" [value]="language.languageId">
                    {{ language.languageName }}
                  </option>
                </select>
              </div>
              <div
                *ngIf="facilitatorForm.get('languageIds')?.touched && facilitatorForm.get('languageIds')?.invalid"
                class="mt-1 text-sm text-red-600">
                Please select at least one language
              </div>
            </div>
            
            <!-- Specializations Multi-select -->
            <div class="form-group md:col-span-2">
              <label class="mb-2 block text-sm font-medium text-gray-700">Specializations</label>
              <div class="form-control-with-icon">
                <i class="fas fa-briefcase-medical"></i>
                <select
                  id="specializationIds"
                  formControlName="specializationIds"
                  multiple
                  class="form-control">
                  <option *ngFor="let specialization of specializations" [value]="specialization.specializationId">
                    {{ specialization.specializationName }} ({{ specialization.categoryName }})
                  </option>
                </select>
              </div>
              <div
                *ngIf="
                  facilitatorForm.get('specializationIds')?.touched && facilitatorForm.get('specializationIds')?.invalid
                "
                class="mt-1 text-sm text-red-600">
                Please select at least one specialization
              </div>
            </div>
          </div>
        </form>
      </div>
      
      <!-- Navigation Buttons -->
      <div class="flex justify-between bg-gray-50 px-8 py-6">
        <button
          *ngIf="currentStep > 1"
          type="button"
          (click)="previousStep()"
          class="rounded-lg border border-gray-300 bg-white px-6 py-3 text-sm font-medium text-gray-700 shadow-sm transition-all duration-200 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
          Previous
        </button>
        <div class="ml-auto">
          <button
            *ngIf="currentStep < totalSteps"
            type="button"
            (click)="nextStep()"
            [disabled]="isSubmitting"
            class="rounded-lg border border-transparent bg-blue-600 px-6 py-3 text-sm font-medium text-white shadow-sm transition-all duration-200 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50">
            <span *ngIf="isSubmitting" class="mr-2">
              <i class="fas fa-spinner fa-spin"></i>
            </span>
            Next
          </button>
          <button
            *ngIf="currentStep === totalSteps"
            type="button"
            (click)="submitFacilitator()"
            [disabled]="isSubmitting"
            class="rounded-lg border border-transparent bg-green-600 px-6 py-3 text-sm font-medium text-white shadow-sm transition-all duration-200 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 disabled:opacity-50">
            <span *ngIf="isSubmitting" class="mr-2">
              <i class="fas fa-spinner fa-spin"></i>
            </span>
            Create Facilitator
          </button>
        </div>
      </div>
    </div>
  </div>