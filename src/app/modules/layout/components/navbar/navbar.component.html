<nav class="bg-[var(--card)] shadow-sm px-4 py-3 flex justify-between items-center border-b border-[var(--border)]">
  <!-- Left -->
  <div class="flex items-center space-x-4">
    <!-- Brand -->
    <a routerLink="/home" class="text-[var(--primary)] font-bold text-xl">
      Fufi Med
    </a>

    <!-- Desktop Menu -->
    <div class="hidden sm:flex space-x-2">
      @for (group of menus(); track group) {
        @for (item of group.items; track item) {
          <a
            [routerLink]="item.route"
            class="px-3 py-1 rounded-md text-sm text-[var(--card-foreground)] hover:bg-[var(--muted)] transition-colors"
            [class.bg-[var(--muted)]]="item.active"
          >
            {{ item.label }}
          </a>
        }
      }
    </div>

    <!-- Hamburger for Mobile -->
    <button class="sm:hidden text-[var(--muted-foreground)]" (click)="toggleMobileMenu()">
      <i class="fas fa-bars"></i>
    </button>
  </div>

  <!-- Right -->
  <div class="flex items-center space-x-4">
    <div class="text-right hidden sm:block">
      <p class="font-medium text-[var(--card-foreground)]">{{auth.user()?.email}}</p>
      <p class="text-xs text-[var(--muted-foreground)]">{{auth.user()?.role}}</p>
    </div>
    <div
      class="w-10 h-10 bg-[var(--primary)] rounded-full flex items-center justify-center text-white font-medium"
    >
      {{auth.user()?.email?.charAt(0)?.toUpperCase() ?? ''}}
    </div>
    <button class="text-[var(--destructive)] flex items-center text-sm hover:underline" (click)="logout()">
      <i class="fas fa-sign-out-alt mr-1"></i> Logout
    </button>
  </div>
</nav>

<!-- Mobile Slide Menu -->
@if (menuService.showMobileMenu) {
  <div
    class="sm:hidden fixed inset-0 bg-black bg-opacity-50 z-40"
    (click)="closeMobileMenu()"
  >
    <div
      class="absolute top-0 left-0 w-64 bg-[var(--card)] h-full shadow-lg p-4"
      (click)="$event.stopPropagation()"
    >
      <button class="mb-4 text-[var(--muted-foreground)]" (click)="closeMobileMenu()">
        <i class="fas fa-times"></i>
      </button>

      @for (group of menus(); track group) {
        @for (item of group.items; track item) {
          <a
            [routerLink]="item.route"
            class="block px-3 py-2 rounded-md text-sm text-[var(--card-foreground)] hover:bg-[var(--muted)]"
            [class.bg-[var(--muted)]]="item.active"
            (click)="closeMobileMenu()"
          >
            {{ item.label }}
          </a>
        }
      }
    </div>
  </div>
}
