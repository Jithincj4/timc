<!-- src/app/components/facilitator-edit/facilitator-edit.component.html -->
<div class="py-12 min-h-screen bg-[var(--background)] text-[var(--foreground)] font-poppins">
  <div class="container max-w-7xl">
    
    <!-- Header -->
    <div class="mb-12 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-6">
      <div>
        <h1 class="text-4xl font-extrabold tracking-tight bg-gradient-to-r from-[var(--primary)] to-[var(--secondary)] bg-clip-text text-transparent">
          Edit Facilitator
        </h1>
        <p class="mt-2 text-base text-[var(--muted-foreground)]">
          Update <span class="font-semibold">user account</span> or <span class="font-semibold">facilitator details</span>.
        </p>
      </div>
      <button
      class="flex items-center gap-2 px-5 py-2 rounded-full bg-[var(--primary)] text-[var(--primary-foreground)] shadow hover:bg-[var(--primary)]/90 transition">
        <span class="text-lg">‚Üê</span>
        Back to List
      </button>
    </div>

    <!-- Two-column layout -->
    <div class="grid gap-10 lg:grid-cols-2">

      <!-- User Account Card -->
      <div class="rounded-2xl border border-[var(--border)] bg-[var(--card)]/90 backdrop-blur-xl 
                  p-8 shadow-lg hover:shadow-2xl transition-all">
        <h2 class="mb-6 flex items-center gap-2 text-2xl font-semibold text-[var(--foreground)]">
          <span class="w-1.5 h-6 rounded-full bg-[var(--primary)]"></span>
          User Account
        </h2>

        <form [formGroup]="userForm" class="space-y-6">
          <!-- Username -->
          <div>
            <label class="block text-sm font-medium">Username</label>
            <input formControlName="username" type="text"
                   class="mt-2 w-full rounded-lg border border-[var(--border)]
                          bg-[var(--muted)]/70 px-3 py-3 text-[var(--foreground)]
                          focus:ring-2 focus:ring-[var(--primary)] focus:outline-none transition"/>
            <p class="mt-1 text-xs text-[var(--destructive)]"
               *ngIf="userForm.get('username')?.touched && userForm.get('username')?.invalid">
              Username is required.
            </p>
          </div>

          <!-- Email -->
          <div>
            <label class="block text-sm font-medium">Email</label>
            <input formControlName="email" type="email"
                   class="mt-2 w-full rounded-lg border border-[var(--border)]
                          bg-[var(--muted)]/70 px-3 py-3 text-[var(--foreground)]
                          focus:ring-2 focus:ring-[var(--primary)] focus:outline-none transition"/>
            <p class="mt-1 text-xs text-[var(--destructive)]"
               *ngIf="userForm.get('email')?.touched && userForm.get('email')?.invalid">
              Enter a valid email.
            </p>
          </div>

          <!-- Passwords -->
          <div class="grid grid-cols-1 gap-6 md:grid-cols-2">
            <div>
              <label class="block text-sm font-medium">Password</label>
              <input formControlName="password" type="password" placeholder="Leave blank to keep current"
                     class="mt-2 w-full rounded-lg border border-[var(--border)]
                            bg-[var(--muted)]/70 px-3 py-3 text-[var(--foreground)]"/>
            </div>
            <div>
              <label class="block text-sm font-medium">Confirm Password</label>
              <input formControlName="confirmPassword" type="password" placeholder="Leave blank to keep current"
                     class="mt-2 w-full rounded-lg border border-[var(--border)]
                            bg-[var(--muted)]/70 px-3 py-3 text-[var(--foreground)]"/>
            </div>
          </div>

          <!-- Save button -->
          <div class="flex justify-end">
            <button
              (click)="saveUserAccount()"
              [disabled]="loading || userForm.invalid"
              class="flex items-center gap-2 px-5 py-2 rounded-full bg-[var(--primary)] text-[var(--primary-foreground)] shadow hover:bg-[var(--primary)]/90 transition">
              <span *ngIf="loading" class="mr-2 inline-block h-4 w-4 animate-spin border-2 border-[var(--primary-foreground)] border-t-transparent rounded-full"></span>
              Save User
            </button>
          </div>
        </form>
      </div>

      <!-- Facilitator Details Card -->
      <div class="rounded-2xl border border-[var(--border)] bg-[var(--card)]/90 backdrop-blur-xl 
                  p-8 shadow-lg hover:shadow-2xl transition-all">
        <h2 class="mb-6 flex items-center gap-2 text-2xl font-semibold text-[var(--foreground)]">
          <span class="w-1.5 h-6 rounded-full bg-[var(--success)]"></span>
          Facilitator Details
        </h2>

        <form [formGroup]="facilitatorForm" class="space-y-6">
          <div class="grid grid-cols-1 gap-6 md:grid-cols-2">
            <div>
              <label class="block text-sm font-medium">First Name</label>
              <input formControlName="firstName" type="text"
                     class="mt-2 w-full rounded-lg border border-[var(--border)]
                            bg-[var(--muted)]/70 px-3 py-3 text-[var(--foreground)]"/>
            </div>
            <div>
              <label class="block text-sm font-medium">Last Name</label>
              <input formControlName="lastName" type="text"
                     class="mt-2 w-full rounded-lg border border-[var(--border)]
                            bg-[var(--muted)]/70 px-3 py-3 text-[var(--foreground)]"/>
            </div>
          </div>

          <div>
            <label class="block text-sm font-medium">License Number</label>
            <input formControlName="licenseNumber" type="text"
                   class="mt-2 w-full rounded-lg border border-[var(--border)]
                          bg-[var(--muted)]/70 px-3 py-3 text-[var(--foreground)]"/>
          </div>

          <div>
            <label class="block text-sm font-medium">Organisation Name</label>
            <input formControlName="organisationName" type="text"
                   class="mt-2 w-full rounded-lg border border-[var(--border)]
                          bg-[var(--muted)]/70 px-3 py-3 text-[var(--foreground)]"/>
          </div>

          <div>
            <label class="block text-sm font-medium">Years of Experience</label>
            <input formControlName="yearsOfExperience" type="number"
                   class="mt-2 w-full rounded-lg border border-[var(--border)]
                          bg-[var(--muted)]/70 px-3 py-3 text-[var(--foreground)]"/>
          </div>

          <div>
            <label class="block text-sm font-medium">Specializations</label>
            <select formControlName="specializationIds" multiple size="6"
                    class="mt-2 w-full rounded-lg border border-[var(--border)]
                           bg-[var(--muted)]/70 px-3 py-3 text-[var(--foreground)]">
              <option *ngFor="let s of specializations" [value]="s.specializationId">
                {{ s.specializationName }} ({{ s.categoryName }})
              </option>
            </select>
          </div>

          <div class="flex justify-end">
            <button
              (click)="saveFacilitatorDetails()"
              disableAfterClick
              class="flex items-center gap-2 px-5 py-2 rounded-full bg-[var(--primary)] text-[var(--primary-foreground)] shadow hover:bg-[var(--primary)]/90 transition">
              <span *ngIf="loading" class="mr-2 inline-block h-4 w-4 animate-spin border-2 border-[var(--success-foreground)] border-t-transparent rounded-full"></span>
              Save Facilitator
            </button>
          </div>
        </form>
      </div>

    </div>
  </div>
</div>
